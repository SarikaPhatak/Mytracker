<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .summary {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-value {
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .form-section {
            padding: 30px;
            background: #f8f9fa;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea {
            resize: vertical;
            min-height: 60px;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .radio-option input[type="radio"] {
            width: auto;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
            margin-top: 10px;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .expenses-section {
            padding: 30px;
        }
        
        .section-title {
            font-size: 20px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .expense-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        
        .expense-item.unnecessary {
            border-left-color: #dc3545;
        }
        
        .expense-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }
        
        .expense-amount {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .expense-category {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .expense-details {
            color: #666;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .expense-type {
            display: inline-block;
            margin-top: 8px;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .expense-type.necessary {
            background: #d4edda;
            color: #155724;
        }
        
        .expense-type.unnecessary {
            background: #f8d7da;
            color: #721c24;
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .delete-btn:hover {
            background: #c82333;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }
        
        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∞ Expense Tracker</h1>
            <div class="summary">
                <div class="summary-item">
                    <div>Total Expenses</div>
                    <div class="summary-value" id="totalExpenses">‚Çπ0</div>
                </div>
                <div class="summary-item">
                    <div>This Month</div>
                    <div class="summary-value" id="monthExpenses">‚Çπ0</div>
                </div>
            </div>
        </div>
        
        <div class="form-section">
            <form id="expenseForm">
                <div class="form-group">
                    <label>Date & Time</label>
                    <input type="datetime-local" id="datetime" required>
                </div>
                
                <div class="form-group">
                    <label>Place</label>
                    <input type="text" id="place" placeholder="Where did you spend?" required>
                </div>
                
                <div class="form-group">
                    <label>Amount (‚Çπ)</label>
                    <input type="number" id="amount" placeholder="0.00" step="0.01" required>
                </div>
                
                <div class="form-group">
                    <label>Category</label>
                    <select id="category" required>
                        <option value="">Select category</option>
                        <option value="Food">Food</option>
                        <option value="Groceries">Groceries</option>
                        <option value="Clothes">Clothes</option>
                        <option value="Home Decorating">Home Decorating</option>
                        <option value="Office Supplies">Office Supplies</option>
                        <option value="Beauty">Beauty</option>
                        <option value="Hygiene">Hygiene</option>
                        <option value="Transport">Transport</option>
                        <option value="Vacation">Vacation</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Description (Optional)</label>
                    <textarea id="description" placeholder="Any notes about this expense?"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Expense Type</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="necessary" name="expenseType" value="necessary" checked>
                            <label for="necessary" style="margin: 0;">Necessary</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="unnecessary" name="expenseType" value="unnecessary">
                            <label for="unnecessary" style="margin: 0;">Unnecessary</label>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">Add Expense</button>
                <button type="button" class="btn btn-secondary" onclick="exportToCSV()">Export to CSV</button>
            </form>
        </div>
        
        <div class="expenses-section">
            <div class="section-title">
                <span>Recent Expenses</span>
                <button class="delete-btn" onclick="clearAllExpenses()" style="padding: 8px 15px;">Clear All</button>
            </div>
            <div id="expensesList"></div>
        </div>
    </div>

    <script>
        // Set current date and time as default
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const datetimeStr = `${year}-${month}-${day}T${hours}:${minutes}`;
        document.getElementById('datetime').value = datetimeStr;
        
        // Load expenses from localStorage
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        
        // Display expenses on load
        displayExpenses();
        updateSummary();
        
        // Handle form submission
        document.getElementById('expenseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const expense = {
                id: Date.now(),
                datetime: document.getElementById('datetime').value,
                place: document.getElementById('place').value,
                amount: parseFloat(document.getElementById('amount').value),
                category: document.getElementById('category').value,
                description: document.getElementById('description').value,
                type: document.querySelector('input[name="expenseType"]:checked').value
            };
            
            expenses.unshift(expense);
            localStorage.setItem('expenses', JSON.stringify(expenses));
            
            // Reset form
            this.reset();
            document.getElementById('datetime').valueAsDate = new Date();
            document.getElementById('necessary').checked = true;
            
            // Update display
            displayExpenses();
            updateSummary();
            
            // Show success feedback
            alert('Expense added successfully! üí∞');
        });
        
        function displayExpenses() {
            const list = document.getElementById('expensesList');
            
            if (expenses.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìù</div>
                        <div>No expenses yet. Start tracking!</div>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = expenses.map(expense => {
                const date = new Date(expense.datetime);
                const formattedDate = date.toLocaleDateString('en-IN', { 
                    day: 'numeric', 
                    month: 'short', 
                    year: 'numeric' 
                });
                const formattedTime = date.toLocaleTimeString('en-IN', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                return `
                    <div class="expense-item ${expense.type}">
                        <div class="expense-header">
                            <div>
                                <div class="expense-amount">‚Çπ${expense.amount.toFixed(2)}</div>
                                <span class="expense-category">${expense.category}</span>
                            </div>
                            <button class="delete-btn" onclick="deleteExpense(${expense.id})">Delete</button>
                        </div>
                        <div class="expense-details">
                            <div><strong>üìç</strong> ${expense.place}</div>
                            <div><strong>üìÖ</strong> ${formattedDate} at ${formattedTime}</div>
                            ${expense.description ? `<div><strong>üìù</strong> ${expense.description}</div>` : ''}
                            <span class="expense-type ${expense.type}">${expense.type}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function updateSummary() {
            const total = expenses.reduce((sum, exp) => sum + exp.amount, 0);
            document.getElementById('totalExpenses').textContent = `‚Çπ${total.toFixed(2)}`;
            
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthTotal = expenses
                .filter(exp => {
                    const expDate = new Date(exp.datetime);
                    return expDate.getMonth() === currentMonth && expDate.getFullYear() === currentYear;
                })
                .reduce((sum, exp) => sum + exp.amount, 0);
            
            document.getElementById('monthExpenses').textContent = `‚Çπ${monthTotal.toFixed(2)}`;
        }
        
        function deleteExpense(id) {
            if (confirm('Are you sure you want to delete this expense?')) {
                expenses = expenses.filter(exp => exp.id !== id);
                localStorage.setItem('expenses', JSON.stringify(expenses));
                displayExpenses();
                updateSummary();
            }
        }
        
        function clearAllExpenses() {
            if (confirm('Are you sure you want to delete ALL expenses? This cannot be undone!')) {
                expenses = [];
                localStorage.setItem('expenses', JSON.stringify(expenses));
                displayExpenses();
                updateSummary();
            }
        }
        
        function exportToCSV() {
            if (expenses.length === 0) {
                alert('No expenses to export!');
                return;
            }
            
            // Create CSV header
            let csv = 'Date,Time,Place,Amount,Category,Description,Type\n';
            
            // Add each expense
            expenses.forEach(expense => {
                const date = new Date(expense.datetime);
                const formattedDate = date.toLocaleDateString('en-IN');
                const formattedTime = date.toLocaleTimeString('en-IN');
                
                csv += `"${formattedDate}","${formattedTime}","${expense.place}",${expense.amount},"${expense.category}","${expense.description}","${expense.type}"\n`;
            });
            
            // Create download link
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `expenses_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            alert('CSV file downloaded! üìä');
        }
    </script>
</body>
</html>